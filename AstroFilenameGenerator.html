<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Astro Filename Generator</title>
        <style>
            :root {
                --bg-color: #ffffff;
                --text-color: #333333;
                --border-color: #cccccc;
                --button-bg: #f0f0f0;
                --input-bg: #ffffff;
                --result-bg: #f8f8f8;
            }

            .dark-mode {
                --bg-color: #1a1a1a;
                --text-color: #ffffff;
                --border-color: #444444;
                --button-bg: #333333;
                --input-bg: #2d2d2d;
                --result-bg: #252525;
            }

            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                background-color: var(--bg-color);
                color: var(--text-color);
                padding: 20px;
                line-height: 1.6;
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
            }

            h1 {
                text-align: center;
                margin-bottom: 20px;
                color: var(--text-color);
            }

            .presets {
                display: flex;
                justify-content: center;
                gap: 10px;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }

            .preset-btn {
                padding: 8px 15px;
                background-color: var(--button-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .preset-btn:hover {
                background-color: #e0e0e0;
            }

            .dark-mode .preset-btn:hover {
                background-color: #444;
            }

            .field-group {
                display: flex;
                flex-direction: column;
                gap: 10px;
                margin-bottom: 20px;
                padding: 15px;
                border-radius: 8px;
                background-color: var(--result-bg);
            }

            .field-row {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .field-label {
                min-width: 100px;
                font-weight: bold;
            }

            .field-input-container {
                display: flex;
                align-items: center;
                gap: 10px;
                flex: 1;
            }

            .field-input {
                padding: 8px;
                border: 1px solid var(--border-color);
                border-radius: 4px;
                background-color: var(--input-bg);
                color: var(--text-color);
                flex: 1;
            }

            .field-select {
                padding: 8px;
                border: 1px solid var(--border-color);
                border-radius: 4px;
                background-color: var(--input-bg);
                color: var(--text-color);
                flex: 0;
            }

            .options-container {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 5px;
            }

            .option-btn {
                padding: 4px 10px;
                background-color: var(--button-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.9em;
            }

            .option-btn:hover {
                background-color: #e0e0e0;
            }

            .dark-mode .option-btn:hover {
                background-color: #444;
            }

            .date-controls {
                display: flex;
                gap: 10px;
            }

            .date-btn {
                padding: 8px 12px;
                background-color: var(--button-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                cursor: pointer;
            }

            .date-btn:hover {
                background-color: #e0e0e0;
            }

            .dark-mode .date-btn:hover {
                background-color: #444;
            }

            .result-section {
                margin-bottom: 20px;
            }

            .section-title {
                font-size: 1.2em;
                margin-bottom: 10px;
            }

            .result-container {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 12px;
                background-color: var(--result-bg);
                border-radius: 4px;
            }

            .result-text {
                flex: 1;
                word-break: break-all;
                font-family: monospace;
            }

            .copy-btn {
                padding: 8px 15px;
                background-color: var(--button-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                cursor: pointer;
            }

            .copy-btn:hover {
                background-color: #e0e0e0;
            }

            .dark-mode .copy-btn:hover {
                background-color: #444;
            }

            .toggle-dark-mode {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
                margin-bottom: 20px;
            }

            .toggle-label {
                font-weight: bold;
            }

            .toggle-switch {
                position: relative;
                display: inline-block;
                width: 50px;
                height: 24px;
            }

            .toggle-switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }

            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                transition: 0.4s;
                border-radius: 24px;
            }

            .slider:before {
                position: absolute;
                content: "";
                height: 16px;
                width: 16px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                transition: 0.4s;
                border-radius: 50%;
            }

            input:checked + .slider {
                background-color: #2196f3;
            }

            input:checked + .slider:before {
                transform: translateX(26px);
            }

            .help-btn {
                display: block;
                margin: 20px auto;
                padding: 10px 20px;
                background-color: var(--button-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                cursor: pointer;
            }

            .help-btn:hover {
                background-color: #e0e0e0;
            }

            .dark-mode .help-btn:hover {
                background-color: #444;
            }

            .notification {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px 20px;
                background-color: #4caf50;
                color: white;
                border-radius: 4px;
                z-index: 1000;
                display: none;
            }

            #helpModal {
                display: none;
                position: fixed;
                z-index: 1001;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
            }

            .modal-content {
                background-color: var(--bg-color);
                margin: 15% auto;
                padding: 20px;
                border-radius: 8px;
                width: 80%;
                max-width: 500px;
            }

            .close {
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
            }

            .close:hover {
                color: black;
            }

            @media (max-width: 600px) {
                .field-row {
                    flex-direction: column;
                    align-items: stretch;
                }

                .date-controls {
                    flex-wrap: wrap;
                }

                .result-container {
                    flex-direction: column;
                    align-items: stretch;
                }
                
                .field-input-container {
                    flex-direction: column;
                    align-items: stretch;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Astro Filename Generator</h1>

            <!-- Presets -->
            <div class="presets">
                <button class="preset-btn" data-preset="solar">Solar</button>
                <button class="preset-btn" data-preset="planetary">
                    Planetary
                </button>
                <button class="preset-btn" data-preset="deep-sky">
                    Deep Sky
                </button>
                <button class="preset-btn" data-preset="clear">
                    Clear All
                </button>
                <button id="shuffleBtn" class="preset-btn">Shuffle</button>
            </div>

            <!-- Input Fields -->
            <div class="field-group">
                <div class="field-row">
                    <label class="field-label">Target:</label>
                    <div class="field-input-container">
                        <input type="text" id="target" class="field-input" />
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Optics:</label>
                    <div class="field-input-container">
                        <input type="text" id="optics" class="field-input" />
                        <select id="optics-select" class="field-select">
                            <option value="">Select Optics</option>
                        </select>
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Filter:</label>
                    <div class="field-input-container">
                        <input type="text" id="filter" class="field-input" />
                        <select id="filter-select" class="field-select">
                            <option value="">Select Filter</option>
                        </select>
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Camera:</label>
                    <div class="field-input-container">
                        <input type="text" id="camera" class="field-input" />
                        <select id="camera-select" class="field-select">
                            <option value="">Select Camera</option>
                        </select>
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Exposures:</label>
                    <div class="field-input-container">
                        <input type="text" id="exposures" class="field-input" />
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Date:</label>
                    <div class="field-input-container">
                        <input
                            type="text"
                            id="date"
                            class="field-input"
                            placeholder="e.g., YYYY-MM-DD"
                        />
                        <div class="date-controls">
                            <button id="todayBtn" class="date-btn">Today</button>
                            <button id="yesterdayBtn" class="date-btn">
                                Yesterday
                            </button>
                        </div>
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Time:</label>
                    <div class="field-input-container">
                        <input
                            type="text"
                            id="time"
                            class="field-input"
                            placeholder="e.g., HH:MM"
                        />
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Processing:</label>
                    <div class="field-input-container">
                        <input
                            type="text"
                            id="processing"
                            class="field-input"
                            placeholder="e.g., PI+RC+LR"
                        />
                    </div>
                </div>

                <div class="field-row">
                    <label class="field-label">Filetype:</label>
                    <div class="field-input-container">
                        <select id="filetype" class="field-select">
                            <option value="fits">FITS</option>
                            <option value="xisf">XISF</option>
                            <option value="png">PNG</option>
                            <option value="tif">TIF</option>
                            <option value="jpg">JPG</option>
                        </select>
                    </div>
                </div>

                <!-- Title Separator -->
                <div class="field-row">
                    <label class="field-label">Title Sep:</label>
                    <div class="field-input-container">
                        <select id="titleSeparator" class="field-select">
                            <option value="-">Hyphen (-)</option>
                            <option value="|">Pipe (|)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Result and Title Sections -->
            <div class="result-section">
                <h2 class="section-title">Filename</h2>
                <div class="result-container">
                    <div id="filename-result" class="result-text">
                        Generated filename will appear here
                    </div>
                    <button id="copy-filename" class="btn copy-btn">
                        Copy
                    </button>
                </div>
            </div>

            <div class="result-section">
                <h2 class="section-title">Image Title</h2>
                <div class="result-container">
                    <div id="title-result" class="result-text">
                        Generated title will appear here
                    </div>
                    <button id="copy-title" class="btn copy-btn">Copy</button>
                </div>
            </div>

            <!-- Toggle Dark Mode -->
            <div class="toggle-dark-mode">
                <label class="toggle-label">Dark Mode</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="darkModeToggle" />
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Help Button -->
            <button class="btn help-btn" id="helpBtn">Help</button>
        </div>

        <div class="notification" id="notification"></div>

        <!-- Help Modal -->
        <div id="helpModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Help</h2>
                <p>
                    This tool generates filenames and image titles for
                    astronomical imaging based on your inputs.
                </p>
                <p>You can:</p>
                <ul>
                    <li>
                        Select from presets for Solar, Planetary, or Deep Sky
                        imaging
                    </li>
                    <li>
                        Use the "Shuffle" button to generate random settings for
                        quick testing
                    </li>
                    <li>
                        Copy generated filenames and titles to clipboard with
                        the buttons
                    </li>
                    <li>Toggle between light and dark modes</li>
                    <li>
                        Use "Today" or "Yesterday" buttons to set the date
                        quickly
                    </li>
                </ul>
                <p>
                    To customize presets and dropdown options, edit the
                    configuration at the top of this HTML file.
                </p>
            </div>
        </div>

        <script>
            // Configuration
            const OPTIONS = {
                optics: [
                    'Reflector 8"',
                    'Refractor 10"',
                    'Dobsonian 14"',
                    'Reflector 12"',
                    'Refractor 8"',
                    "Solar Scope",
                ],
                filter: [
                    "Luminance",
                    "Red",
                    "Green",
                    "Blue",
                    "Ha",
                    "O3",
                    "SII",
                    "Light Pollution Cut",
                ],
                camera: [
                    "DSLR",
                    "CCD",
                    "CMOS",
                    "SBIG STL",
                    "ASI1600MM",
                    "ZWO ASI294MC",
                ],
            };

            const PRESETS = {
                solar: {
                    target: "Sun",
                    optics: "Solar Scope",
                    filter: "Hydrogen Alpha",
                    camera: "CCD",
                    exposures: "3x10s",
                    filetype: "fits",
                },
                planetary: {
                    target: "Jupiter",
                    optics: 'Refractor 8"',
                    filter: "Light Pollution Cut",
                    camera: "CCD",
                    exposures: "5x30s",
                    filetype: "xisf",
                },
                "deep-sky": {
                    target: "M31",
                    optics: 'Dobsonian 14"',
                    filter: "Luminance",
                    camera: "CCD",
                    exposures: "10x60s",
                    filetype: "png",
                },
            };

            // DOM Elements
            const elements = {
                target: document.getElementById("target"),
                optics: document.getElementById("optics"),
                filter: document.getElementById("filter"),
                camera: document.getElementById("camera"),
                exposures: document.getElementById("exposures"),
                date: document.getElementById("date"),
                time: document.getElementById("time"),
                processing: document.getElementById("processing"),
                filetype: document.getElementById("filetype"),
                titleSeparator: document.getElementById("titleSeparator"),
                filenameResult: document.getElementById("filename-result"),
                titleResult: document.getElementById("title-result"),
                copyFilename: document.getElementById("copy-filename"),
                copyTitle: document.getElementById("copy-title"),
                todayBtn: document.getElementById("todayBtn"),
                yesterdayBtn: document.getElementById("yesterdayBtn"),
                shuffleBtn: document.getElementById("shuffleBtn"),
                helpBtn: document.getElementById("helpBtn"),
                closeModal: document.querySelector(".close"),
                helpModal: document.getElementById("helpModal"),
                darkModeToggle: document.getElementById("darkModeToggle"),
                notification: document.getElementById("notification"),
                opticsSelect: document.getElementById("optics-select"),
                filterSelect: document.getElementById("filter-select"),
                cameraSelect: document.getElementById("camera-select"),
            };

            // Initialize dropdowns
            function initDropdowns() {
                // Create options for optics, filter and camera dropdowns
                OPTIONS.optics.forEach((option) => {
                    const optionElement = document.createElement("option");
                    optionElement.value = option;
                    optionElement.textContent = option;
                    elements.opticsSelect.appendChild(optionElement);
                });

                OPTIONS.filter.forEach((option) => {
                    const optionElement = document.createElement("option");
                    optionElement.value = option;
                    optionElement.textContent = option;
                    elements.filterSelect.appendChild(optionElement);
                });

                OPTIONS.camera.forEach((option) => {
                    const optionElement = document.createElement("option");
                    optionElement.value = option;
                    optionElement.textContent = option;
                    elements.cameraSelect.appendChild(optionElement);
                });

                // Set up event listeners for dropdowns
                elements.opticsSelect.addEventListener("change", function () {
                    elements.optics.value = this.value;
                    updateResults();
                });

                elements.filterSelect.addEventListener("change", function () {
                    elements.filter.value = this.value;
                    updateResults();
                });

                elements.cameraSelect.addEventListener("change", function () {
                    elements.camera.value = this.value;
                    updateResults();
                });

                // Set up event listeners for manual input fields
                elements.optics.addEventListener("input", function () {
                    // Update dropdown to match manual input (if it's a valid option)
                    const selectedOption = OPTIONS.optics.find(
                        (opt) => opt === this.value,
                    );
                    if (selectedOption) {
                        elements.opticsSelect.value = selectedOption;
                    } else {
                        // If not found, set to empty (no selection)
                        elements.opticsSelect.value = "";
                    }
                    updateResults();
                });

                elements.filter.addEventListener("input", function () {
                    const selectedOption = OPTIONS.filter.find(
                        (opt) => opt === this.value,
                    );
                    if (selectedOption) {
                        elements.filterSelect.value = selectedOption;
                    } else {
                        elements.filterSelect.value = "";
                    }
                    updateResults();
                });

                elements.camera.addEventListener("input", function () {
                    const selectedOption = OPTIONS.camera.find(
                        (opt) => opt === this.value,
                    );
                    if (selectedOption) {
                        elements.cameraSelect.value = selectedOption;
                    } else {
                        elements.cameraSelect.value = "";
                    }
                    updateResults();
                });
            }

            // Generate filename based on selected fields
            function generateFilename() {
                const fields = [
                    { key: "target", label: "Target" },
                    { key: "optics", label: "Optics" },
                    { key: "filter", label: "Filter" },
                    { key: "camera", label: "Camera" },
                    { key: "exposures", label: "Exposures" },
                    { key: "date", label: "Date" },
                    { key: "time", label: "Time" },
                    { key: "processing", label: "Processing" },
                ];

                let filename = "";

                fields.forEach((field) => {
                    const value = document.getElementById(field.key).value;
                    if (value.trim() !== "") {
                        // Replace spaces with hyphens
                        const cleanValue = value.replace(/\s+/g, "-");

                        if (filename === "") {
                            filename = cleanValue;
                        } else {
                            filename += `_${cleanValue}`;
                        }
                    }
                });

                const filetype = document.getElementById("filetype").value;
                if (filename === "") {
                    filename = `image.${filetype}`;
                } else {
                    filename += `.${filetype}`;
                }

                return filename;
            }

            // Generate image title
            function generateTitle() {
                const fields = [
                    { key: "target", label: "Target" },
                    { key: "optics", label: "Optics" },
                    { key: "filter", label: "Filter" },
                    { key: "camera", label: "Camera" },
                    { key: "exposures", label: "Exposures" },
                    { key: "date", label: "Date" },
                    { key: "time", label: "Time" },
                    { key: "processing", label: "Processing" },
                ];

                const separator = elements.titleSeparator.value || "-";

                let title = "";

                fields.forEach((field) => {
                    const value = document.getElementById(field.key).value;
                    if (value.trim() !== "") {
                        // Replace spaces with hyphens
                        const cleanValue = value.replace(/\s+/g, "-");

                        if (title === "") {
                            title = cleanValue;
                        } else {
                            title += ` ${separator} ${cleanValue}`;
                        }
                    }
                });

                return title;
            }

            // Update results
            function updateResults() {
                elements.filenameResult.textContent = generateFilename();
                elements.titleResult.textContent = generateTitle();
            }

            // Apply preset
            function applyPreset(presetName) {
                if (presetName === "clear") {
                    // Clear all fields
                    document.querySelectorAll("input, select").forEach((el) => {
                        if (
                            el.id !== "filetype" &&
                            el.id !== "titleSeparator"
                        ) {
                            el.value = "";
                        }
                    });
                } else if (PRESETS[presetName]) {
                    const preset = PRESETS[presetName];

                    // Apply values from preset
                    Object.keys(preset).forEach((key) => {
                        if (key === "filetype") {
                            elements.filetype.value = preset[key];
                        } else if (key === "target" && elements.target) {
                            elements.target.value = preset[key];
                        } else if (key === "optics" && elements.optics) {
                            elements.optics.value = preset[key];
                            // Update corresponding dropdown
                            const selectedOption = OPTIONS.optics.find(
                                (opt) => opt === preset[key],
                            );
                            if (selectedOption) {
                                elements.opticsSelect.value = selectedOption;
                            } else {
                                elements.opticsSelect.value = "";
                            }
                        } else if (key === "filter" && elements.filter) {
                            elements.filter.value = preset[key];
                            // Update corresponding dropdown
                            const selectedOption = OPTIONS.filter.find(
                                (opt) => opt === preset[key],
                            );
                            if (selectedOption) {
                                elements.filterSelect.value = selectedOption;
                            } else {
                                elements.filterSelect.value = "";
                            }
                        } else if (key === "camera" && elements.camera) {
                            elements.camera.value = preset[key];
                            // Update corresponding dropdown
                            const selectedOption = OPTIONS.camera.find(
                                (opt) => opt === preset[key],
                            );
                            if (selectedOption) {
                                elements.cameraSelect.value = selectedOption;
                            } else {
                                elements.cameraSelect.value = "";
                            }
                        } else if (key === "exposures" && elements.exposures) {
                            elements.exposures.value = preset[key];
                        }
                    });
                }

                updateResults();
            }

            // Shuffle random values
            function shufflePreset() {
                const fields = [
                    {
                        key: "target",
                        value: ["M31", "Jupiter", "Sun", "Andromeda", "Saturn"],
                    },
                    { key: "optics", value: OPTIONS.optics },
                    { key: "filter", value: OPTIONS.filter },
                    { key: "camera", value: OPTIONS.camera },
                    {
                        key: "exposures",
                        value: ["5x30s", "10x60s", "2x90s", "15x45s"],
                    },
                    {
                        key: "processing",
                        value: ["PI+RC+LR", "PI+DR", "PI+STF", "None"],
                    },
                ];

                fields.forEach((field) => {
                    if (field.key === "date") return;
                    const randomValue =
                        field.value[
                            Math.floor(Math.random() * field.value.length)
                        ];

                    if (field.key === "target") {
                        elements.target.value = randomValue;
                    } else if (field.key === "optics") {
                        elements.optics.value = randomValue;
                        // Update dropdown
                        const selectedOption = OPTIONS.optics.find(
                            (opt) => opt === randomValue,
                        );
                        if (selectedOption) {
                            elements.opticsSelect.value = selectedOption;
                        } else {
                            elements.opticsSelect.value = "";
                        }
                    } else if (field.key === "filter") {
                        elements.filter.value = randomValue;
                        // Update dropdown
                        const selectedOption = OPTIONS.filter.find(
                            (opt) => opt === randomValue,
                        );
                        if (selectedOption) {
                            elements.filterSelect.value = selectedOption;
                        } else {
                            elements.filterSelect.value = "";
                        }
                    } else if (field.key === "camera") {
                        elements.camera.value = randomValue;
                        // Update dropdown
                        const selectedOption = OPTIONS.camera.find(
                            (opt) => opt === randomValue,
                        );
                        if (selectedOption) {
                            elements.cameraSelect.value = selectedOption;
                        } else {
                            elements.cameraSelect.value = "";
                        }
                    } else if (field.key === "exposures") {
                        elements.exposures.value = randomValue;
                    } else if (field.key === "processing") {
                        elements.processing.value = randomValue;
                    }
                });

                // Set date to today
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, "0");
                const day = String(now.getDate()).padStart(2, "0");
                elements.date.value = `${year}-${month}-${day}`;

                updateResults();
            }

            // Copy to clipboard
            function copyToClipboard(text, element) {
                navigator.clipboard.writeText(text).then(() => {
                    const originalText = element.textContent;
                    element.textContent = "Copied!";

                    setTimeout(() => {
                        element.textContent = originalText;
                    }, 2000);
                });
            }

            // Set today's date
            function setToday() {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, "0");
                const day = String(now.getDate()).padStart(2, "0");
                elements.date.value = `${year}-${month}-${day}`;
                updateResults();
            }

            // Set yesterday's date
            function setYesterday() {
                const now = new Date();
                now.setDate(now.getDate() - 1);
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, "0");
                const day = String(now.getDate()).padStart(2, "0");
                elements.date.value = `${year}-${month}-${day}`;
                updateResults();
            }

            // Toggle dark mode
            function toggleDarkMode() {
                document.body.classList.toggle("dark-mode");
            }

            // Show help modal
            function showHelp() {
                elements.helpModal.style.display = "block";
            }

            // Close help modal
            function closeHelp() {
                elements.helpModal.style.display = "none";
            }

            // Initialize the application
            function init() {
                initDropdowns();

                // Event listeners for fields (except the option buttons which are handled above)
                document.querySelectorAll("input, select").forEach((el) => {
                    el.addEventListener("change", updateResults);
                });

                // Preset buttons
                document.querySelectorAll(".preset-btn").forEach((btn) => {
                    btn.addEventListener("click", () => {
                        const preset = btn.getAttribute("data-preset");
                        applyPreset(preset);
                    });
                });

                // Shuffle button
                elements.shuffleBtn.addEventListener("click", shufflePreset);

                // Today and Yesterday buttons
                elements.todayBtn.addEventListener("click", setToday);
                elements.yesterdayBtn.addEventListener("click", setYesterday);

                // Copy buttons
                elements.copyFilename.addEventListener("click", () => {
                    copyToClipboard(
                        elements.filenameResult.textContent,
                        elements.copyFilename,
                    );
                });

                elements.copyTitle.addEventListener("click", () => {
                    copyToClipboard(
                        elements.titleResult.textContent,
                        elements.copyTitle,
                    );
                });

                // Help button
                elements.helpBtn.addEventListener("click", showHelp);
                elements.closeModal.addEventListener("click", closeHelp);

                // Dark mode toggle
                elements.darkModeToggle.addEventListener(
                    "change",
                    toggleDarkMode,
                );

                // Close modal when clicking outside
                window.addEventListener("click", (event) => {
                    if (event.target === elements.helpModal) {
                        closeHelp();
                    }
                });

                // Initial update
                updateResults();
            }

            // Run initialization when page loads
            window.addEventListener("DOMContentLoaded", init);
        </script>
    </body>
</html>
